{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useVoice.js\nimport { useEffect, useRef, useState } from 'react';\nexport const useVoice = ({\n  onCommand\n}) => {\n  _s();\n  const recognitionRef = useRef(null);\n  const [listening, setListening] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (!('webkitSpeechRecognition' in window)) {\n      setError('Speech Recognition not supported in this browser');\n      return;\n    }\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'en-IN';\n    recognition.continuous = true;\n    recognition.interimResults = false;\n    recognition.onresult = event => {\n      const transcript = event.results[event.results.length - 1][0].transcript.trim().toLowerCase();\n      console.log('ðŸŽ¤ Heard:', transcript);\n      onCommand === null || onCommand === void 0 ? void 0 : onCommand(transcript);\n    };\n    recognition.onerror = e => {\n      console.error('Voice error:', e);\n      if (e.error === 'aborted' || e.error === 'no-speech') {\n        return;\n      }\n      setError(e.error);\n      setListening(false);\n    };\n    recognition.onend = () => {\n      setListening(false);\n    };\n    recognitionRef.current = recognition;\n    return () => recognition.stop();\n  }, [onCommand]);\n  const startListening = () => {\n    if (recognitionRef.current && !listening) {\n      recognitionRef.current.start();\n      setListening(true);\n    }\n  };\n  const stopListening = () => {\n    var _recognitionRef$curre;\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.stop();\n    setListening(false);\n  };\n  return {\n    listening,\n    startListening,\n    stopListening,\n    error\n  };\n};\n_s(useVoice, \"gTyCEdfZfJq4kAVFrUEanQpsEH4=\");","map":{"version":3,"names":["useEffect","useRef","useState","useVoice","onCommand","_s","recognitionRef","listening","setListening","error","setError","window","recognition","webkitSpeechRecognition","lang","continuous","interimResults","onresult","event","transcript","results","length","trim","toLowerCase","console","log","onerror","e","onend","current","stop","startListening","start","stopListening","_recognitionRef$curre"],"sources":["/Users/abhayagarwal/IdeaProjects/UPI-saathi/frontend/src/hooks/useVoice.js"],"sourcesContent":["// src/hooks/useVoice.js\nimport { useEffect, useRef, useState } from 'react';\n\nexport const useVoice = ({ onCommand }) => {\n  const recognitionRef = useRef(null);\n  const [listening, setListening] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!('webkitSpeechRecognition' in window)) {\n      setError('Speech Recognition not supported in this browser');\n      return;\n    }\n\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'en-IN';\n    recognition.continuous = true;\n    recognition.interimResults = false;\n\n    recognition.onresult = (event) => {\n      const transcript =\n        event.results[event.results.length - 1][0].transcript.trim().toLowerCase();\n      console.log('ðŸŽ¤ Heard:', transcript);\n      onCommand?.(transcript);\n    };\n\n    recognition.onerror = (e) => {\n      console.error('Voice error:', e);\n      if (e.error === 'aborted' || e.error === 'no-speech') {\n        return;\n      }\n      setError(e.error);\n      setListening(false);\n    };\n\n    recognition.onend = () => {\n      setListening(false);\n    };\n\n    recognitionRef.current = recognition;\n\n    return () => recognition.stop();\n  }, [onCommand]);\n\n  const startListening = () => {\n    if (recognitionRef.current && !listening) {\n      recognitionRef.current.start();\n      setListening(true);\n    }\n  };\n\n  const stopListening = () => {\n    recognitionRef.current?.stop();\n    setListening(false);\n  };\n\n  return {\n    listening,\n    startListening,\n    stopListening,\n    error\n  };\n};\n"],"mappings":";AAAA;AACA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEnD,OAAO,MAAMC,QAAQ,GAAGA,CAAC;EAAEC;AAAU,CAAC,KAAK;EAAAC,EAAA;EACzC,MAAMC,cAAc,GAAGL,MAAM,CAAC,IAAI,CAAC;EACnC,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAExCF,SAAS,CAAC,MAAM;IACd,IAAI,EAAE,yBAAyB,IAAIW,MAAM,CAAC,EAAE;MAC1CD,QAAQ,CAAC,kDAAkD,CAAC;MAC5D;IACF;IAEA,MAAME,WAAW,GAAG,IAAID,MAAM,CAACE,uBAAuB,CAAC,CAAC;IACxDD,WAAW,CAACE,IAAI,GAAG,OAAO;IAC1BF,WAAW,CAACG,UAAU,GAAG,IAAI;IAC7BH,WAAW,CAACI,cAAc,GAAG,KAAK;IAElCJ,WAAW,CAACK,QAAQ,GAAIC,KAAK,IAAK;MAChC,MAAMC,UAAU,GACdD,KAAK,CAACE,OAAO,CAACF,KAAK,CAACE,OAAO,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACF,UAAU,CAACG,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MAC5EC,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEN,UAAU,CAAC;MACpCf,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAGe,UAAU,CAAC;IACzB,CAAC;IAEDP,WAAW,CAACc,OAAO,GAAIC,CAAC,IAAK;MAC3BH,OAAO,CAACf,KAAK,CAAC,cAAc,EAAEkB,CAAC,CAAC;MAChC,IAAIA,CAAC,CAAClB,KAAK,KAAK,SAAS,IAAIkB,CAAC,CAAClB,KAAK,KAAK,WAAW,EAAE;QACpD;MACF;MACAC,QAAQ,CAACiB,CAAC,CAAClB,KAAK,CAAC;MACjBD,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC;IAEDI,WAAW,CAACgB,KAAK,GAAG,MAAM;MACxBpB,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC;IAEDF,cAAc,CAACuB,OAAO,GAAGjB,WAAW;IAEpC,OAAO,MAAMA,WAAW,CAACkB,IAAI,CAAC,CAAC;EACjC,CAAC,EAAE,CAAC1B,SAAS,CAAC,CAAC;EAEf,MAAM2B,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIzB,cAAc,CAACuB,OAAO,IAAI,CAACtB,SAAS,EAAE;MACxCD,cAAc,CAACuB,OAAO,CAACG,KAAK,CAAC,CAAC;MAC9BxB,YAAY,CAAC,IAAI,CAAC;IACpB;EACF,CAAC;EAED,MAAMyB,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,qBAAA;IAC1B,CAAAA,qBAAA,GAAA5B,cAAc,CAACuB,OAAO,cAAAK,qBAAA,uBAAtBA,qBAAA,CAAwBJ,IAAI,CAAC,CAAC;IAC9BtB,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC;EAED,OAAO;IACLD,SAAS;IACTwB,cAAc;IACdE,aAAa;IACbxB;EACF,CAAC;AACH,CAAC;AAACJ,EAAA,CA3DWF,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}